{"version":3,"sources":["utilities/constants.js","utilities/encryption.js","components/UrlCopier.js","components/PersonTable.js","components/PersonForm.js","components/App.js","serviceWorker.js","index.js"],"names":["ROOT_URL_DEV","ROOT_URL_PROD","VERY_SECRET_KEY","encrypt","value","Cryptr","decrypt","error","UrlCopier","giftee","this","props","url","concat","react_default","a","createElement","react_clipboard_default","data-clipboard-text","PureComponent","PersonTable","handleExclusionChange","name","event","_this","onExclusionChange","target","handlePersonDelete","onPersonDelete","_this2","_this$props","classes","exclusionOptions","people","addingMoreExclusionsDisabled","length","Paper_default","className","root","Table_default","TableHead_default","TableRow_default","TableCell_default","removeCell","TableBody_default","map","person","exclusion","key","NativeSelect_default","exclusionSelect","noExclusionSelect","disabled","onChange","nullOption","filter","children","components_UrlCopier","IconButton_default","onClick","ClearRounded_default","removeIcon","withStyles","theme","width","overflowX","backgroundColor","fontSize","color","noSelection","textAlign","PersonForm","state","exclusions","handleNameChange","setState","handleSubmit","preventDefault","_this$state","clearedPeople","Object","objectSpread","toConsumableArray","formatName","trim","isAddDisabled","_this$state2","formattedName","some","handleGenerateGiftees","excludedNamesByName","getExcludedNamesByName","shuffledPeople","shuffle","shuffledPeopleSortedByHasExclusionsFirst","sortBy","hasOwnProperty","originalFirstPerson","gifteeNamesByName","reduce","accumulator","currentPerson","queue","excludedName","nextPersonIndex","findIndex","nextPerson","nextPersonName","newGifteeNamesByName","defineProperty","slice","namesWithoutGiftee","without","apply","p","keys","namesWithoutGifter","values","newPeople","filteredExclusions","pair","has","newExclusions","Set","_this$state3","getExclusionOptions","_objectSpread3","names","Array","from","_this$state4","enhrichedPeople","Math","floor","isGenerateGifteesDisabled","Button_default","variant","type","components_PersonTable","noValidate","onSubmit","TextField_default","autoFocus","label","margin","createMuiTheme","palette","primary","main","secondary","amber","App","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","getRootUrl","window","location","href","includes","getGiftee","queryParams","queryString","parse","search","your_giftee","handleDialogClose","assign","dialogOpen","Boolean","styles","src_components_PersonForm","Dialog_default","open","DialogContent_default","role","aria-label","hostname","match","ReactDOM","render","src_components_App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.32f017ec.chunk.js","sourcesContent":["export const ROOT_URL_DEV = 'http://localhost:3000';\nexport const ROOT_URL_PROD = 'https://sasuomi.github.io/giftibutor';\n\nexport default {\n  ROOT_URL_DEV,\n  ROOT_URL_PROD\n};\n","import Cryptr from 'cryptr';\n\nconst VERY_SECRET_KEY = 'very-secret-key-btw-who-are-you-and-what-are-you-doing-here-well-hello-anyway';\n\nexport const encrypt = value => new Cryptr(VERY_SECRET_KEY).encrypt(value);\n\nexport const decrypt = value => {\n  try {\n    return new Cryptr(VERY_SECRET_KEY).decrypt(value);\n  } catch(error) {\n    return null;\n  }\n}\n\nexport default {\n  encrypt,\n  decrypt\n};\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { ROOT_URL_PROD } from '../utilities/constants'\n\nimport Clipboard from 'react-clipboard.js';\n\nclass UrlCopier extends PureComponent {\n  static propTypes = {\n    giftee: PropTypes.string\n  }\n\n  render() {\n    const {\n      giftee\n    } = this.props;\n\n    const url = `${ROOT_URL_PROD}?your_giftee=${giftee}`;\n\n    return giftee ? (\n      <Clipboard data-clipboard-text={ url }>\n        Copy Link to Clipboard\n      </Clipboard>\n    ) : null;\n  }\n}\n\nexport default UrlCopier;\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\n\nimport UrlCopier from './UrlCopier';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\n\nimport NativeSelect from '@material-ui/core/NativeSelect';\n\nimport IconButton from '@material-ui/core/IconButton';\nimport ClearRoundedIcon from '@material-ui/icons/ClearRounded';\n\nconst styles = theme => ({\n  root: {\n    width: '100%',\n    overflowX: 'auto',\n    backgroundColor: '#f5f3da'\n  },\n  exclusionSelect: {\n    fontSize: '0.8125rem'\n  },\n  noExclusionSelect: {\n    fontSize: '0.8125rem',\n    color: 'rgba(0, 0, 0, 0.5)'\n  },\n  noSelection: {\n    root: {\n      color: 'red'\n    }\n  },\n  removeCell: {\n    width: '1px',\n    textAlign: 'center'\n  },\n  removeIcon: {\n    color: '#dc5757'\n  }\n});\n\nclass PersonTable extends PureComponent {\n  static propTypes = {\n    classes: PropTypes.object.isRequired,\n    people: PropTypes.array.isRequired,\n    exclusionOptions: PropTypes.array.isRequired,\n    onPersonDelete: PropTypes.func.isRequired,\n    onExclusionChange: PropTypes.func.isRequired,\n    addingMoreExclusionsDisabled: PropTypes.bool\n  }\n\n  handleExclusionChange = name => event => {\n    this.props.onExclusionChange(name, event.target.value);\n  }\n\n  handlePersonDelete = name => event => {\n    this.props.onPersonDelete(name);\n  }\n\n  render() {\n    const {\n      classes,\n      exclusionOptions,\n      people,\n      addingMoreExclusionsDisabled\n    } = this.props;\n\n    return people.length ? (\n      <Paper className={ classes.root }>\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell>Name</TableCell>\n              <TableCell>Don't match with</TableCell>\n              <TableCell>Giftee</TableCell>\n              <TableCell className={ classes.removeCell }>Remove</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {people.map(person => {\n              const value = person.exclusion || '';\n\n              return (\n                <TableRow key={ person.name }>\n                  <TableCell>{ person.name }</TableCell>\n                  <TableCell>\n                    <NativeSelect\n                      name=\"exclusion\"\n                      className={ value ? classes.exclusionSelect : classes.noExclusionSelect }\n                      value={ value }\n                      disabled={ !value && addingMoreExclusionsDisabled }\n                      onChange={ this.handleExclusionChange(person.name) }\n                    >\n                      <option className={ classes.nullOption} value=\"\">Select...</option>\n                      { exclusionOptions\n                          .filter(name => name !== person.name)\n                          .map(name => (\n                            <option\n                              key={ name }\n                              value={ name }\n                              children={ name }\n                            />\n                          )) }\n                    </NativeSelect>\n                  </TableCell>\n                  <TableCell>\n                    { person.giftee ? (\n                      <UrlCopier giftee={ person.giftee }/>\n                    ) : null }\n                  </TableCell>\n                  <TableCell className={ classes.removeCell }>\n                    <IconButton onClick={ this.handlePersonDelete(person.name) }>\n                      <ClearRoundedIcon className={ classes.removeIcon }/>\n                    </IconButton>\n                  </TableCell>\n                </TableRow>\n              );\n            })}\n          </TableBody>\n        </Table>\n      </Paper>\n    ) : null;\n  }\n}\n\nexport default withStyles(styles)(PersonTable);\n","import React, { PureComponent } from 'react';\nimport './PersonForm.css';\n\nimport { encrypt } from '../utilities/encryption';\n\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\n\nimport PersonTable from './PersonTable';\n\nimport shuffle from 'lodash/shuffle';\nimport sortBy from 'lodash/sortBy';\nimport without from 'lodash/without';\n\nconst MIN_PEOPLE = 3;\n\nclass PersonForm extends PureComponent {\n  state = {\n    name: '',\n    people: [],\n    // people: [ { name: '1', giftee: null }, { name: '2', giftee: null }, { name: '3', giftee: null }],\n    exclusions: []\n  }\n\n  handleNameChange = event => {\n    this.setState({\n      name: event.target.value\n    });\n  }\n\n  handleSubmit = event => {\n    event.preventDefault();\n\n    const { people, name } = this.state;\n\n    const clearedPeople = people.map(person => ({\n      ...person,\n      giftee: null\n    })) \n\n    this.setState({\n      name: '',\n      people: [ ...clearedPeople, {\n        name: this.formatName(name),\n        giftee: null\n      }]\n    });\n  }\n  \n  formatName = name => {\n    return name.trim()\n  }\n\n  isAddDisabled = () => {\n    const { name, people } = this.state;\n\n    if (!name.length) return true\n\n    const formattedName = this.formatName(name);\n\n    return people.some(person => person.name === formattedName);\n  }\n\n  handleGenerateGiftees = () => {\n    const { people } = this.state;\n\n    const excludedNamesByName = this.getExcludedNamesByName()\n    const shuffledPeople = shuffle(people);\n    const shuffledPeopleSortedByHasExclusionsFirst = sortBy(shuffledPeople, person => !excludedNamesByName.hasOwnProperty(person.name))\n\n    // Analogy: order people around a circular table so that everybody's giftee sits on their right side\n    // and the giftee is not excluded from the person sitting on the left.\n\n    const originalFirstPerson = shuffledPeopleSortedByHasExclusionsFirst[0];\n\n    let gifteeNamesByName = shuffledPeople.reduce(accumulator => {\n      const {\n        currentPerson,\n        queue,\n        gifteeNamesByName\n      } = accumulator;\n\n      const excludedName = excludedNamesByName[currentPerson.name];\n\n      // Works properly even if excludedName is undefined:\n      const nextPersonIndex = queue.findIndex(person => person.name !== excludedName);\n      // If -1 we have consumed the whole original queue, let's point to the first person:\n      const nextPerson = nextPersonIndex !== -1 ? queue[nextPersonIndex] : originalFirstPerson;\n      const nextPersonName = nextPerson.name;\n\n      const newGifteeNamesByName = {\n        ...gifteeNamesByName,\n        [currentPerson.name]: nextPersonName\n      };\n\n      const newQueue = queue.length && nextPersonIndex !== -1 ? [\n        // Drop nextPerson from the queue:\n        ...queue.slice(0, nextPersonIndex), ...queue.slice(nextPersonIndex + 1, queue.length)\n      ] : queue\n\n      return {\n        currentPerson: nextPerson,\n        queue: newQueue,\n        gifteeNamesByName: newGifteeNamesByName\n      }\n    }, {\n      currentPerson: shuffledPeopleSortedByHasExclusionsFirst[0],\n      queue: shuffledPeopleSortedByHasExclusionsFirst.slice(1),\n      gifteeNamesByName: {}\n    }).gifteeNamesByName\n\n    // Horrible hack because our algorithm isn't perfect:\n    const namesWithoutGiftee = without(people.map(p => p.name), ...Object.keys(gifteeNamesByName));\n    const namesWithoutGifter = without(people.map(p => p.name), ...Object.values(gifteeNamesByName));\n\n    if (namesWithoutGiftee.length === 1 && namesWithoutGifter.length === 1 && namesWithoutGiftee[0] !== namesWithoutGifter[0]) {\n      const gifteelessExcludedName = excludedNamesByName[namesWithoutGiftee[0]];\n\n      if (gifteelessExcludedName !== namesWithoutGifter[0]) {\n        gifteeNamesByName[namesWithoutGiftee[0]] = namesWithoutGifter[0];\n      }\n    }\n\n    const newPeople = people.map(person => {\n      return {\n        ...person,\n        giftee: gifteeNamesByName[person.name]\n      };\n    });\n\n    this.setState({\n      people: newPeople\n    });\n  }\n\n  handleExclusionChange = (name, excludedName) => {\n    const { exclusions } = this.state;\n\n    const filteredExclusions = exclusions.filter(pair => !pair.has(name) && !pair.has(excludedName))\n\n    const newExclusions = excludedName ? [\n      ...filteredExclusions,\n      new Set([ name, excludedName ])\n    ] : filteredExclusions;\n\n    this.setState({\n      exclusions: newExclusions\n    });\n  }\n\n  handlePersonDelete = name => {\n    const { people, exclusions } = this.state;\n\n    this.setState({\n      people: people.filter(person => person.name !== name),\n      exclusions: exclusions.filter(pair => !pair.has(name)),\n    });\n  }\n\n  getExclusionOptions = () => {\n    const { people } = this.state;\n\n    return people.map(person => person.name);\n  }\n\n  getExcludedNamesByName = () => {\n    const { exclusions } = this.state;\n\n    return exclusions.reduce((excludedNamesByName, exclusion) => {\n      const names = Array.from(exclusion);\n\n      return {\n        ...excludedNamesByName,\n        [names[0]]: names[1],\n        [names[1]]: names[0]\n      }\n    }, {})\n  }\n\n  render() {\n    const { name, people, exclusions } = this.state;\n\n    const excludedNamesByName = this.getExcludedNamesByName()\n    const enhrichedPeople = people.map(person => ({\n      ...person,\n      exclusion: excludedNamesByName[person.name] || null,\n      giftee: person.giftee ? encrypt(person.giftee) : null\n    }));\n    const addingMoreExclusionsDisabled = Math.floor(people.length / 2) <= exclusions.length;\n    const isGenerateGifteesDisabled = people.length < MIN_PEOPLE;\n\n    return (\n      <div className=\"PersonForm\">\n        <div className=\"generate-giftees-container\">\n          <p>\n            { people.length ? (\n              <Button\n                children=\"Generate giftees\"\n                variant=\"contained\"\n                color=\"primary\"\n                disabled={ isGenerateGifteesDisabled }\n                type=\"submit\"\n                onClick={ this.handleGenerateGiftees }\n              />\n            ) : null }\n          </p>\n        </div>\n        <PersonTable\n          people={ enhrichedPeople }\n          exclusionOptions={ this.getExclusionOptions() }\n          onPersonDelete={ this.handlePersonDelete }\n          onExclusionChange={ this.handleExclusionChange }\n          addingMoreExclusionsDisabled={ isGenerateGifteesDisabled || addingMoreExclusionsDisabled }\n        />\n        { isGenerateGifteesDisabled ? (\n          <p>\n            Add at least { MIN_PEOPLE } people to be able to generate giftees.\n          </p>\n        ) : null }\n        <form\n          noValidate\n          onSubmit={ this.handleSubmit }\n        >\n          <TextField\n            autoFocus\n            label=\"Name\"\n            value={ name }\n            onChange={ this.handleNameChange }\n            margin=\"normal\"\n          />\n          <Button\n            className=\"add-person\"\n            children=\"Add\"\n            variant=\"contained\"\n            color=\"primary\"\n            disabled={ this.isAddDisabled() }\n            type=\"submit\"\n          />\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default PersonForm;\n","import React, { PureComponent } from 'react';\nimport './App.css';\n\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\nimport amber from '@material-ui/core/colors/amber';\n\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\n\nimport queryString from 'query-string';\n\nimport { ROOT_URL_DEV, ROOT_URL_PROD } from '../utilities/constants';\nimport { decrypt } from '../utilities/encryption';\n\nimport PersonForm from './PersonForm'\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#81c784',\n    },\n    secondary: amber\n  }\n});\n\nclass App extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      dialogOpen: Boolean(this.getGiftee())\n    };\n  }\n\n  getRootUrl = () => {\n    return window.location.href.includes(ROOT_URL_DEV) ?\n      ROOT_URL_DEV : ROOT_URL_PROD\n  }\n\n  getGiftee = () => {\n    const queryParams = queryString.parse(window.location.search)\n\n    return queryParams && queryParams.your_giftee && queryParams.your_giftee.length ?\n      decrypt(queryParams.your_giftee) :\n      null;\n  }\n\n  handleDialogClose = () => {\n    // We're ignoring this is an SPA 'cause this is quick and simple vs react-router:\n    window.location.assign(this.getRootUrl());\n  }\n\n  render() {\n    const giftee = this.getGiftee();\n\n    return (\n      <MuiThemeProvider theme={theme}>\n          <div className=\"App\">\n            <header className=\"App-header\">\n              <h1>Giftibutor</h1>\n              <h2>the Secret Santa generator</h2>\n            </header>\n            <main className=\"App-main\">\n              <PersonForm />\n              <Dialog\n                open={ this.state.dialogOpen }\n              >\n                <DialogContent className=\"giftee-dialog-content\">\n                  <h1><span role=\"img\" aria-label=\"Santa Claus\">🎅</span></h1>\n                  <h2>Your secret person is:</h2>\n                  <p>{ giftee }</p>\n                  <Button\n                    children=\"Close\"\n                    variant=\"contained\"\n                    color=\"primary\"\n                    onClick={ this.handleDialogClose }\n                  />\n                </DialogContent>\n              </Dialog>\n            </main>\n          </div>\n      </MuiThemeProvider>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}