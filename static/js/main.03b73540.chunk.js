(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{257:function(e,n,t){e.exports=t(637)},262:function(e,n,t){},264:function(e,n,t){},282:function(e,n){},284:function(e,n){},294:function(e,n){},296:function(e,n){},323:function(e,n){},325:function(e,n){},326:function(e,n){},331:function(e,n){},333:function(e,n){},340:function(e,n){},342:function(e,n){},360:function(e,n){},363:function(e,n){},379:function(e,n){},382:function(e,n){},385:function(e,n,t){},637:function(e,n,t){"use strict";t.r(n);var a=t(1),r=t.n(a),l=t(20),o=t.n(l),c=(t(262),t(32)),i=t(33),u=t(35),s=t(34),m=t(36),f=(t(264),t(54)),h=t(254),p=t.n(h),d=t(68),g=t.n(d),b=t(255),E=t.n(b),v=t(256),y=t.n(v),O=t(242),j=t.n(O),w="http://localhost:3000",x="https://samulisuomi.github.io/giftibutor",N=t(132),C=t.n(N),S="very-secret-key-btw-who-are-you-and-what-are-you-doing-here-well-hello-anyway",k=function(e){return new C.a(S).encrypt(e)},P=function(e){try{return new C.a(S).decrypt(e)}catch(n){return null}},D=t(55),A=t(42),B=t(56),G=(t(385),t(253)),M=t.n(G),I=t(243),_=t.n(I),q=function(e){function n(){return Object(c.a)(this,n),Object(u.a)(this,Object(s.a)(n).apply(this,arguments))}return Object(m.a)(n,e),Object(i.a)(n,[{key:"render",value:function(){var e=this.props.giftee,n="".concat(x,"?your_giftee=").concat(e);return e?r.a.createElement(_.a,{"data-clipboard-text":n},"Copy Link to Clipboard"):null}}]),n}(a.PureComponent),R=t(245),z=t.n(R),F=t(247),J=t.n(F),T=t(29),U=t.n(T),W=t(246),L=t.n(W),V=t(133),X=t.n(V),Y=t(91),$=t.n(Y),H=t(248),K=t.n(H),Q=t(249),Z=t.n(Q),ee=t(250),ne=t.n(ee),te=function(e){function n(){var e,t;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(t=Object(u.a)(this,(e=Object(s.a)(n)).call.apply(e,[this].concat(r)))).handleExclusionChange=function(e){return function(n){t.props.onExclusionChange(e,n.target.value)}},t.handlePersonDelete=function(e){return function(n){t.props.onPersonDelete(e)}},t}return Object(m.a)(n,e),Object(i.a)(n,[{key:"render",value:function(){var e=this,n=this.props,t=n.classes,a=n.exclusionOptions,l=n.people,o=n.addingMoreExclusionsDisabled;return l.length?r.a.createElement($.a,{className:t.root},r.a.createElement(z.a,null,r.a.createElement(L.a,null,r.a.createElement(X.a,null,r.a.createElement(U.a,null,"Name"),r.a.createElement(U.a,null,"Don't match with"),r.a.createElement(U.a,null,"Giftee"),r.a.createElement(U.a,{className:t.removeCell},"Remove"))),r.a.createElement(J.a,null,l.map(function(n){var l=n.exclusion||"";return r.a.createElement(X.a,{key:n.name},r.a.createElement(U.a,null,n.name),r.a.createElement(U.a,null,r.a.createElement(K.a,{name:"exclusion",className:l?t.exclusionSelect:t.noExclusionSelect,value:l,disabled:!l&&o,onChange:e.handleExclusionChange(n.name)},r.a.createElement("option",{className:t.nullOption,value:""},"Select..."),a.filter(function(e){return e!==n.name}).map(function(e){return r.a.createElement("option",{key:e,value:e,children:e})}))),r.a.createElement(U.a,null,n.giftee?r.a.createElement(q,{giftee:n.giftee}):null),r.a.createElement(U.a,{className:t.removeCell},r.a.createElement(Z.a,{onClick:e.handlePersonDelete(n.name)},r.a.createElement(ne.a,{className:t.removeIcon}))))})))):null}}]),n}(a.PureComponent),ae=Object(f.withStyles)(function(e){return{root:{width:"100%",overflowX:"auto",backgroundColor:"#f5f3da"},exclusionSelect:{fontSize:"0.8125rem"},noExclusionSelect:{fontSize:"0.8125rem",color:"rgba(0, 0, 0, 0.5)"},noSelection:{root:{color:"red"}},removeCell:{width:"1px",textAlign:"center"},removeIcon:{color:"#dc5757"}}})(te),re=t(251),le=t.n(re),oe=t(252),ce=t.n(oe),ie=t(134),ue=t.n(ie),se=function(e){function n(){var e,t;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(t=Object(u.a)(this,(e=Object(s.a)(n)).call.apply(e,[this].concat(r)))).state={name:"",people:[],exclusions:[]},t.handleNameChange=function(e){t.setState({name:e.target.value})},t.handleSubmit=function(e){e.preventDefault();var n=t.state,a=n.people,r=n.name,l=a.map(function(e){return Object(B.a)({},e,{giftee:null})});t.setState({name:"",people:[].concat(Object(A.a)(l),[{name:t.formatName(r),giftee:null}])})},t.formatName=function(e){return e.trim()},t.isAddDisabled=function(){var e=t.state,n=e.name,a=e.people;if(!n.length)return!0;var r=t.formatName(n);return a.some(function(e){return e.name===r})},t.handleGenerateGiftees=function(){var e=t.state.people,n=t.getExcludedNamesByName(),a=le()(e),r=ce()(a,function(e){return!n.hasOwnProperty(e.name)}),l=r[0],o=a.reduce(function(e){var t=e.currentPerson,a=e.queue,r=e.gifteeNamesByName,o=n[t.name],c=a.findIndex(function(e){return e.name!==o}),i=-1!==c?a[c]:l,u=i.name,s=Object(B.a)({},r,Object(D.a)({},t.name,u));return{currentPerson:i,queue:a.length&&-1!==c?[].concat(Object(A.a)(a.slice(0,c)),Object(A.a)(a.slice(c+1,a.length))):a,gifteeNamesByName:s}},{currentPerson:r[0],queue:r.slice(1),gifteeNamesByName:{}}).gifteeNamesByName,c=ue.a.apply(void 0,[e.map(function(e){return e.name})].concat(Object(A.a)(Object.keys(o)))),i=ue.a.apply(void 0,[e.map(function(e){return e.name})].concat(Object(A.a)(Object.values(o))));1===c.length&&1===i.length&&c[0]!==i[0]&&(n[c[0]]!==i[0]&&(o[c[0]]=i[0]));var u=e.map(function(e){return Object(B.a)({},e,{giftee:o[e.name]})});t.setState({people:u})},t.handleExclusionChange=function(e,n){var a=t.state.exclusions.filter(function(t){return!t.has(e)&&!t.has(n)}),r=n?[].concat(Object(A.a)(a),[new Set([e,n])]):a;t.setState({exclusions:r})},t.handlePersonDelete=function(e){var n=t.state,a=n.people,r=n.exclusions;t.setState({people:a.filter(function(n){return n.name!==e}),exclusions:r.filter(function(n){return!n.has(e)})})},t.getExclusionOptions=function(){return t.state.people.map(function(e){return e.name})},t.getExcludedNamesByName=function(){return t.state.exclusions.reduce(function(e,n){var t,a=Array.from(n);return Object(B.a)({},e,(t={},Object(D.a)(t,a[0],a[1]),Object(D.a)(t,a[1],a[0]),t))},{})},t}return Object(m.a)(n,e),Object(i.a)(n,[{key:"render",value:function(){var e=this.state,n=e.name,t=e.people,a=e.exclusions,l=this.getExcludedNamesByName(),o=t.map(function(e){return Object(B.a)({},e,{exclusion:l[e.name]||null,giftee:e.giftee?k(e.giftee):null})}),c=Math.floor(t.length/2)<=a.length,i=t.length<3;return r.a.createElement("div",{className:"PersonForm"},r.a.createElement("div",{className:"generate-giftees-container"},r.a.createElement("p",null,t.length?r.a.createElement(g.a,{children:"Generate giftees",variant:"contained",color:"primary",disabled:i,type:"submit",onClick:this.handleGenerateGiftees}):null)),r.a.createElement(ae,{people:o,exclusionOptions:this.getExclusionOptions(),onPersonDelete:this.handlePersonDelete,onExclusionChange:this.handleExclusionChange,addingMoreExclusionsDisabled:i||c}),i?r.a.createElement("p",null,"Add at least ",3," people to be able to generate giftees."):null,r.a.createElement("form",{noValidate:!0,onSubmit:this.handleSubmit},r.a.createElement(M.a,{autoFocus:!0,label:"Name",value:n,onChange:this.handleNameChange,margin:"normal"}),r.a.createElement(g.a,{className:"add-person",children:"Add",variant:"contained",color:"primary",disabled:this.isAddDisabled(),type:"submit"})))}}]),n}(a.PureComponent),me=Object(f.createMuiTheme)({palette:{primary:{main:"#81c784"},secondary:p.a}}),fe=function(e){function n(e){var t;return Object(c.a)(this,n),(t=Object(u.a)(this,Object(s.a)(n).call(this,e))).getRootUrl=function(){return window.location.href.includes(w)?w:x},t.getGiftee=function(){var e=j.a.parse(window.location.search);return e&&e.your_giftee&&e.your_giftee.length?P(e.your_giftee):null},t.handleDialogClose=function(){window.location.assign(t.getRootUrl())},t.state={dialogOpen:Boolean(t.getGiftee())},t}return Object(m.a)(n,e),Object(i.a)(n,[{key:"render",value:function(){var e=this.getGiftee();return r.a.createElement(f.MuiThemeProvider,{theme:me},r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",null,"Giftibutor"),r.a.createElement("h2",null,"the Secret Santa generator")),r.a.createElement("main",{className:"App-main"},r.a.createElement(se,null),r.a.createElement(E.a,{open:this.state.dialogOpen},r.a.createElement(y.a,{className:"giftee-dialog-content"},r.a.createElement("h1",null,r.a.createElement("span",{role:"img","aria-label":"Santa Claus"},"\ud83c\udf85")),r.a.createElement("h2",null,"Your secret person is:"),r.a.createElement("p",null,e),r.a.createElement(g.a,{children:"Close",variant:"contained",color:"primary",onClick:this.handleDialogClose}))))))}}]),n}(a.PureComponent);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(fe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[257,2,1]]]);
//# sourceMappingURL=main.03b73540.chunk.js.map