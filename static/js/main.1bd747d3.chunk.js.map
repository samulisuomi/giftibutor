{"version":3,"sources":["utils.js","UrlCopier.js","PersonTable.js","PersonForm.js","App.js","serviceWorker.js","index.js"],"names":["VERY_SECRET_KEY","encrypt","value","Cryptr","UrlCopier","giftee","this","props","window","react_default","a","createElement","react_clipboard_default","data-clipboard-text","concat","PureComponent","withRouter","PersonTable","handleExclusionChange","name","event","_this","onExclusionChange","target","handlePersonDelete","onPersonDelete","_this2","_this$props","classes","exclusionOptions","people","addingMoreExclusionsDisabled","length","Paper_default","className","root","Table_default","TableHead_default","TableRow_default","TableCell_default","removeCell","TableBody_default","map","person","exclusion","key","NativeSelect_default","exclusionSelect","noExclusionSelect","disabled","onChange","nullOption","filter","children","src_UrlCopier","IconButton_default","onClick","ClearRounded_default","removeIcon","withStyles","theme","width","overflowX","backgroundColor","fontSize","color","noSelection","textAlign","PersonForm","state","exclusions","handleNameChange","setState","handleSubmit","preventDefault","_this$state","clearedPeople","Object","objectSpread","toConsumableArray","formatName","trim","isAddDisabled","_this$state2","formattedName","some","handleGenerateGiftees","excludedNamesByName","getExcludedNamesByName","shuffledPeople","shuffle","shuffledPeopleSortedByHasExclusionsFirst","sortBy","hasOwnProperty","originalFirstPerson","gifteeNamesByName","reduce","accumulator","currentPerson","queue","excludedName","nextPersonIndex","findIndex","nextPerson","nextPersonName","newGifteeNamesByName","defineProperty","slice","namesWithoutGiftee","without","apply","p","keys","namesWithoutGifter","values","newPeople","filteredExclusions","pair","has","newExclusions","Set","_this$state3","getExclusionOptions","_objectSpread3","names","Array","from","_this$state4","enhrichedPeople","Math","floor","isGenerateGifteesDisabled","Button_default","variant","type","src_PersonTable","noValidate","onSubmit","TextField_default","label","margin","createMuiTheme","palette","primary","main","secondary","amber","App","console","log","process","styles","BrowserRouter","basename","Switch","Route","path","exact","component","Boolean","location","hostname","match","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.1bd747d3.chunk.js","sourcesContent":["import Cryptr from 'cryptr';\n\nconst VERY_SECRET_KEY = 'very-secret-key-btw-who-are-you-and-what-are-you-doing-here-well-hello-anyway';\n\nexport const encrypt = value => new Cryptr(VERY_SECRET_KEY).encrypt(value);\n\nexport const decrypt = value => {\n  try {\n    return new Cryptr(VERY_SECRET_KEY).decrypt(value);\n  } catch(error) {\n    return null;\n  }\n}\n\nexport default {\n  encrypt,\n  decrypt\n};\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { withRouter } from 'react-router'\nimport Clipboard from 'react-clipboard.js';\n\nclass UrlCopier extends PureComponent {\n  static propTypes = {\n    giftee: PropTypes.string,\n    router: PropTypes.func.isRequired\n  }\n\n  render() {\n    const {\n      giftee\n    } = this.props;\n\n    window.props = this.props;\n\n    return giftee ? (\n      <Clipboard data-clipboard-text={ `https://sasuomi.github.io/giftibutor?your_giftee=${giftee}` }>\n        Copy Link to Clipboard\n      </Clipboard>\n    ) : null;\n  }\n}\n\nexport default withRouter(UrlCopier);\n","import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\n\nimport UrlCopier from './UrlCopier';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\n\nimport NativeSelect from '@material-ui/core/NativeSelect';\n\nimport IconButton from '@material-ui/core/IconButton';\nimport ClearRoundedIcon from '@material-ui/icons/ClearRounded';\n\nconst styles = theme => ({\n  root: {\n    width: '100%',\n    overflowX: 'auto',\n    backgroundColor: '#f5f3da'\n  },\n  exclusionSelect: {\n    fontSize: '0.8125rem'\n  },\n  noExclusionSelect: {\n    fontSize: '0.8125rem',\n    color: 'rgba(0, 0, 0, 0.5)'\n  },\n  noSelection: {\n    root: {\n      color: 'red'\n    }\n  },\n  removeCell: {\n    width: '1px',\n    textAlign: 'center'\n  },\n  removeIcon: {\n    color: '#dc5757'\n  }\n});\n\nclass PersonTable extends PureComponent {\n  static propTypes = {\n    classes: PropTypes.object.isRequired,\n    people: PropTypes.array.isRequired,\n    exclusionOptions: PropTypes.array.isRequired,\n    onPersonDelete: PropTypes.func.isRequired,\n    onExclusionChange: PropTypes.func.isRequired,\n    addingMoreExclusionsDisabled: PropTypes.bool\n  }\n\n  handleExclusionChange = name => event => {\n    this.props.onExclusionChange(name, event.target.value);\n  }\n\n  handlePersonDelete = name => event => {\n    this.props.onPersonDelete(name);\n  }\n\n  render() {\n    const {\n      classes,\n      exclusionOptions,\n      people,\n      addingMoreExclusionsDisabled\n    } = this.props;\n\n    return people.length ? (\n      <Paper className={ classes.root }>\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell>Name</TableCell>\n              <TableCell>Don't match with</TableCell>\n              <TableCell>Giftee</TableCell>\n              <TableCell className={ classes.removeCell }>Remove</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {people.map(person => {\n              const value = person.exclusion || '';\n\n              return (\n                <TableRow key={ person.name }>\n                  <TableCell>{ person.name }</TableCell>\n                  <TableCell>\n                    <NativeSelect\n                      name=\"exclusion\"\n                      className={ value ? classes.exclusionSelect : classes.noExclusionSelect }\n                      value={ value }\n                      disabled={ !value && addingMoreExclusionsDisabled }\n                      onChange={ this.handleExclusionChange(person.name) }\n                    >\n                      <option className={ classes.nullOption} value=\"\">Select...</option>\n                      { exclusionOptions\n                          .filter(name => name !== person.name)\n                          .map(name => (\n                            <option\n                              key={ name }\n                              value={ name }\n                              children={ name }\n                            />\n                          )) }\n                    </NativeSelect>\n                  </TableCell>\n                  <TableCell>\n                    { person.giftee ? (\n                      <UrlCopier giftee={ person.giftee }/>\n                    ) : null }\n                  </TableCell>\n                  <TableCell className={ classes.removeCell }>\n                    <IconButton onClick={ this.handlePersonDelete(person.name) }>\n                      <ClearRoundedIcon className={ classes.removeIcon }/>\n                    </IconButton>\n                  </TableCell>\n                </TableRow>\n              );\n            })}\n          </TableBody>\n        </Table>\n      </Paper>\n    ) : null;\n  }\n}\n\nexport default withStyles(styles)(PersonTable);\n","import React, { PureComponent } from 'react';\nimport './PersonForm.css';\n\nimport { encrypt } from './utils';\n\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\n\nimport PersonTable from './PersonTable';\n\nimport shuffle from 'lodash/shuffle';\nimport sortBy from 'lodash/sortBy';\nimport without from 'lodash/without';\n\nconst MIN_PEOPLE = 3;\n\nclass PersonForm extends PureComponent {\n  state = {\n    name: '',\n    // people: [],\n    people: [ { name: '1', giftee: null }, { name: '2', giftee: null }, { name: '3', giftee: null }],\n    exclusions: []\n  }\n\n  handleNameChange = event => {\n    this.setState({\n      name: event.target.value\n    });\n  }\n\n  handleSubmit = event => {\n    event.preventDefault();\n\n    const { people, name } = this.state;\n\n    const clearedPeople = people.map(person => ({\n      ...person,\n      giftee: null\n    })) \n\n    this.setState({\n      name: '',\n      people: [ ...clearedPeople, {\n        name: this.formatName(name),\n        giftee: null\n      }]\n    });\n  }\n  \n  formatName = name => {\n    return name.trim()\n  }\n\n  isAddDisabled = () => {\n    const { name, people } = this.state;\n\n    if (!name.length) return true\n\n    const formattedName = this.formatName(name);\n\n    return people.some(person => person.name === formattedName);\n  }\n\n  handleGenerateGiftees = () => {\n    const { people } = this.state;\n\n    const excludedNamesByName = this.getExcludedNamesByName()\n    const shuffledPeople = shuffle(people);\n    const shuffledPeopleSortedByHasExclusionsFirst = sortBy(shuffledPeople, person => !excludedNamesByName.hasOwnProperty(person.name))\n\n    // Analogy: order people around a circular table so that everybody's giftee sits on their right side\n    // and the giftee is not excluded from the person sitting on the left.\n\n    const originalFirstPerson = shuffledPeopleSortedByHasExclusionsFirst[0];\n\n    let gifteeNamesByName = shuffledPeople.reduce(accumulator => {\n      const {\n        currentPerson,\n        queue,\n        gifteeNamesByName\n      } = accumulator;\n\n      const excludedName = excludedNamesByName[currentPerson.name];\n\n      // Works properly even if excludedName is undefined:\n      const nextPersonIndex = queue.findIndex(person => person.name !== excludedName);\n      // If -1 we have consumed the whole original queue, let's point to the first person:\n      const nextPerson = nextPersonIndex !== -1 ? queue[nextPersonIndex] : originalFirstPerson;\n      const nextPersonName = nextPerson.name;\n\n      const newGifteeNamesByName = {\n        ...gifteeNamesByName,\n        [currentPerson.name]: nextPersonName\n      };\n\n      const newQueue = queue.length && nextPersonIndex !== -1 ? [\n        // Drop nextPerson from the queue:\n        ...queue.slice(0, nextPersonIndex), ...queue.slice(nextPersonIndex + 1, queue.length)\n      ] : queue\n\n      return {\n        currentPerson: nextPerson,\n        queue: newQueue,\n        gifteeNamesByName: newGifteeNamesByName\n      }\n    }, {\n      currentPerson: shuffledPeopleSortedByHasExclusionsFirst[0],\n      queue: shuffledPeopleSortedByHasExclusionsFirst.slice(1),\n      gifteeNamesByName: {}\n    }).gifteeNamesByName\n\n    // Horrible hack because our algorithm isn't perfect:\n    const namesWithoutGiftee = without(people.map(p => p.name), ...Object.keys(gifteeNamesByName));\n    const namesWithoutGifter = without(people.map(p => p.name), ...Object.values(gifteeNamesByName));\n\n    if (namesWithoutGiftee.length === 1 && namesWithoutGifter.length === 1 && namesWithoutGiftee[0] !== namesWithoutGifter[0]) {\n      const gifteelessExcludedName = excludedNamesByName[namesWithoutGiftee[0]];\n\n      if (gifteelessExcludedName !== namesWithoutGifter[0]) {\n        gifteeNamesByName[namesWithoutGiftee[0]] = namesWithoutGifter[0];\n      }\n    }\n\n    const newPeople = people.map(person => {\n      return {\n        ...person,\n        giftee: gifteeNamesByName[person.name]\n      };\n    });\n\n    this.setState({\n      people: newPeople\n    });\n  }\n\n  handleExclusionChange = (name, excludedName) => {\n    const { exclusions } = this.state;\n\n    const filteredExclusions = exclusions.filter(pair => !pair.has(name) && !pair.has(excludedName))\n\n    const newExclusions = excludedName ? [\n      ...filteredExclusions,\n      new Set([ name, excludedName ])\n    ] : filteredExclusions;\n\n    this.setState({\n      exclusions: newExclusions\n    });\n  }\n\n  handlePersonDelete = name => {\n    const { people, exclusions } = this.state;\n\n    this.setState({\n      people: people.filter(person => person.name !== name),\n      exclusions: exclusions.filter(pair => !pair.has(name)),\n    });\n  }\n\n  getExclusionOptions = () => {\n    const { people } = this.state;\n\n    return people.map(person => person.name);\n  }\n\n  getExcludedNamesByName = () => {\n    const { exclusions } = this.state;\n\n    return exclusions.reduce((excludedNamesByName, exclusion) => {\n      const names = Array.from(exclusion);\n\n      return {\n        ...excludedNamesByName,\n        [names[0]]: names[1],\n        [names[1]]: names[0]\n      }\n    }, {})\n  }\n\n  render() {\n    const { name, people, exclusions } = this.state;\n\n    const excludedNamesByName = this.getExcludedNamesByName()\n    const enhrichedPeople = people.map(person => ({\n      ...person,\n      exclusion: excludedNamesByName[person.name] || null,\n      giftee: person.giftee ? encrypt(person.giftee) : null\n    }));\n    const addingMoreExclusionsDisabled = Math.floor(people.length / 2) <= exclusions.length;\n    const isGenerateGifteesDisabled = people.length < MIN_PEOPLE;\n\n    return (\n      <div className=\"PersonForm\">\n        <div className=\"generate-giftees-container\">\n          <p>\n            { people.length ? (\n              <Button\n                children=\"Generate giftees\"\n                variant=\"contained\"\n                color=\"primary\"\n                disabled={ isGenerateGifteesDisabled }\n                type=\"submit\"\n                onClick={ this.handleGenerateGiftees }\n              />\n            ) : null }\n          </p>\n        </div>\n        <PersonTable\n          people={ enhrichedPeople }\n          exclusionOptions={ this.getExclusionOptions() }\n          onPersonDelete={ this.handlePersonDelete }\n          onExclusionChange={ this.handleExclusionChange }\n          addingMoreExclusionsDisabled={ isGenerateGifteesDisabled || addingMoreExclusionsDisabled }\n        />\n        { isGenerateGifteesDisabled ? (\n          <p>\n            Add at least { MIN_PEOPLE } people to be able to generate giftees.\n          </p>\n        ) : null }\n        <form\n          noValidate\n          onSubmit={ this.handleSubmit }\n        >\n          <TextField\n            label=\"Name\"\n            value={ name }\n            onChange={ this.handleNameChange }\n            margin=\"normal\"\n          />\n          <Button\n            className=\"add-person\"\n            children=\"Add\"\n            variant=\"contained\"\n            color=\"primary\"\n            disabled={ this.isAddDisabled() }\n            type=\"submit\"\n          />\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default PersonForm;\n","import React, { PureComponent } from 'react';\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport './App.css';\n\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\nimport amber from '@material-ui/core/colors/amber';\n\nimport PersonForm from './PersonForm'\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#81c784',\n    },\n    secondary: amber\n  }\n});\n\nclass App extends PureComponent {\n  render() {\n    const a = process.env.PUBLIC_URL\n    console.log(a)\n    return (\n      <MuiThemeProvider theme={theme}>\n        <Router basename={ process.env.PUBLIC_URL }>\n          <div className=\"App\">\n            <header className=\"App-header\">\n              <h1>Giftibutor</h1>\n              <h2>the Secret Santa generator</h2>\n            </header>\n            <main className=\"App-main\">\n              <Switch>\n                <Route path=\"/\" exact component={ PersonForm } />\n                <Route path=\"/giftee\" exact component={() => (<span children=\"TODO\" />)} />\n                <Route component={() => (<span children=\"Not Found\" />)} />\n              </Switch>\n            </main>\n          </div>\n        </Router>\n      </MuiThemeProvider>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}