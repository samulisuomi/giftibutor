{"version":3,"sources":["PersonTable.js","PersonForm.js","App.js","serviceWorker.js","index.js"],"names":["PersonTable","handleExclusionChange","name","event","_this","props","onExclusionChange","target","value","handlePersonDelete","onPersonDelete","_this2","this","_this$props","classes","exclusionOptions","people","addingMoreExclusionsDisabled","length","react_default","a","createElement","Paper_default","className","root","Table_default","TableHead_default","TableRow_default","TableCell_default","removeCell","TableBody_default","map","person","exclusion","key","NativeSelect_default","exclusionSelect","noExclusionSelect","disabled","onChange","nullOption","filter","children","giftee","IconButton_default","onClick","ClearRounded_default","removeIcon","PureComponent","withStyles","theme","width","overflowX","backgroundColor","fontSize","color","noSelection","textAlign","PersonForm","state","exclusions","handleNameChange","setState","handleSubmit","preventDefault","_this$state","clearedPeople","Object","objectSpread","toConsumableArray","concat","formatName","trim","isAddDisabled","_this$state2","formattedName","some","handleGenerateGiftees","excludedNamesByName","getExcludedNamesByName","shuffledPeople","shuffle","shuffledPeopleSortedByHasExclusionsFirst","sortBy","hasOwnProperty","originalFirstPerson","gifteeNamesByName","reduce","accumulator","currentPerson","queue","excludedName","nextPersonIndex","findIndex","nextPerson","nextPersonName","newGifteeNamesByName","defineProperty","slice","namesWithoutGiftee","without","apply","p","keys","namesWithoutGifter","values","newPeople","filteredExclusions","pair","has","newExclusions","Set","_this$state3","getExclusionOptions","_objectSpread3","names","Array","from","_this$state4","peopleWithExclusions","Math","floor","isGenerateGifteesDisabled","Button_default","variant","type","src_PersonTable","noValidate","onSubmit","TextField_default","label","margin","createMuiTheme","palette","primary","main","secondary","amber","App","styles","BrowserRouter","basename","process","Switch","Route","path","exact","component","Boolean","window","location","hostname","match","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.af318708.chunk.js","sourcesContent":["import React, { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { withStyles } from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\n\nimport NativeSelect from '@material-ui/core/NativeSelect';\n\nimport IconButton from '@material-ui/core/IconButton';\nimport ClearRoundedIcon from '@material-ui/icons/ClearRounded';\n\nconst styles = theme => ({\n  root: {\n    width: '100%',\n    overflowX: 'auto',\n    backgroundColor: '#f5f3da'\n  },\n  exclusionSelect: {\n    fontSize: '0.8125rem'\n  },\n  noExclusionSelect: {\n    fontSize: '0.8125rem',\n    color: 'rgba(0, 0, 0, 0.5)'\n  },\n  noSelection: {\n    root: {\n      color: 'red'\n    }\n  },\n  removeCell: {\n    width: '1px',\n    textAlign: 'center'\n  },\n  removeIcon: {\n    color: '#dc5757'\n  }\n});\n\nclass PersonTable extends PureComponent {\n  static propTypes = {\n    classes: PropTypes.object.isRequired,\n    people: PropTypes.array.isRequired,\n    exclusionOptions: PropTypes.array.isRequired,\n    onPersonDelete: PropTypes.func.isRequired,\n    onExclusionChange: PropTypes.func.isRequired,\n    addingMoreExclusionsDisabled: PropTypes.bool\n  }\n\n  handleExclusionChange = name => event => {\n    this.props.onExclusionChange(name, event.target.value);\n  }\n\n  handlePersonDelete = name => event => {\n    this.props.onPersonDelete(name);\n  }\n\n  render() {\n    const {\n      classes,\n      exclusionOptions,\n      people,\n      addingMoreExclusionsDisabled\n    } = this.props;\n\n    return people.length ? (\n      <Paper className={ classes.root }>\n        <Table>\n          <TableHead>\n            <TableRow>\n              <TableCell>Name</TableCell>\n              <TableCell>Don't match with</TableCell>\n              <TableCell>Giftee</TableCell>\n              <TableCell className={ classes.removeCell }>Remove</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {people.map(person => {\n              const value = person.exclusion || '';\n\n              return (\n                <TableRow key={ person.name }>\n                  <TableCell>{ person.name }</TableCell>\n                  <TableCell>\n                    <NativeSelect\n                      name=\"exclusion\"\n                      className={ value ? classes.exclusionSelect : classes.noExclusionSelect }\n                      value={ value }\n                      disabled={ !value && addingMoreExclusionsDisabled }\n                      onChange={ this.handleExclusionChange(person.name) }\n                    >\n                      <option className={ classes.nullOption} value=\"\">Select...</option>\n                      { exclusionOptions\n                          .filter(name => name !== person.name)\n                          .map(name => (\n                            <option\n                              key={ name }\n                              value={ name }\n                              children={ name }\n                            />\n                          )) }\n                    </NativeSelect>\n                  </TableCell>\n                  <TableCell>{ person.giftee }</TableCell>\n                  <TableCell className={ classes.removeCell }>\n                    <IconButton onClick={ this.handlePersonDelete(person.name) }>\n                      <ClearRoundedIcon className={ classes.removeIcon }/>\n                    </IconButton>\n                  </TableCell>\n                </TableRow>\n              );\n            })}\n          </TableBody>\n        </Table>\n      </Paper>\n    ) : null;\n  }\n}\n\nexport default withStyles(styles)(PersonTable);\n","import React, { PureComponent } from 'react';\nimport './PersonForm.css'\n\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\n\nimport PersonTable from './PersonTable'\n\nimport shuffle from 'lodash/shuffle';\nimport sortBy from 'lodash/sortBy';\nimport without from 'lodash/without';\n\nconst MIN_PEOPLE = 3;\n\nclass PersonForm extends PureComponent {\n  state = {\n    name: '',\n    people: [],\n    exclusions: []\n  }\n\n  handleNameChange = event => {\n    this.setState({\n      name: event.target.value\n    });\n  }\n\n  handleSubmit = event => {\n    event.preventDefault();\n\n    const { people, name } = this.state;\n\n    const clearedPeople = people.map(person => ({\n      ...person,\n      giftee: null\n    })) \n\n    this.setState({\n      name: '',\n      people: [ ...clearedPeople, {\n        name: this.formatName(name),\n        giftee: null\n      }]\n    });\n  }\n  \n  formatName = name => {\n    return name.trim()\n  }\n\n  isAddDisabled = () => {\n    const { name, people } = this.state;\n\n    if (!name.length) return true\n\n    const formattedName = this.formatName(name);\n\n    return people.some(person => person.name === formattedName);\n  }\n\n  handleGenerateGiftees = () => {\n    const { people } = this.state;\n\n    const excludedNamesByName = this.getExcludedNamesByName()\n    const shuffledPeople = shuffle(people);\n    const shuffledPeopleSortedByHasExclusionsFirst = sortBy(shuffledPeople, person => !excludedNamesByName.hasOwnProperty(person.name))\n\n    // Analogy: order people around a circular table so that everybody's giftee sits on their right side\n    // and the giftee is not excluded from the person sitting on the left.\n\n    const originalFirstPerson = shuffledPeopleSortedByHasExclusionsFirst[0];\n\n    let gifteeNamesByName = shuffledPeople.reduce(accumulator => {\n      const {\n        currentPerson,\n        queue,\n        gifteeNamesByName\n      } = accumulator;\n\n      const excludedName = excludedNamesByName[currentPerson.name];\n\n      // Works properly even if excludedName is undefined:\n      const nextPersonIndex = queue.findIndex(person => person.name !== excludedName);\n      // If -1 we have consumed the whole original queue, let's point to the first person:\n      const nextPerson = nextPersonIndex !== -1 ? queue[nextPersonIndex] : originalFirstPerson;\n      const nextPersonName = nextPerson.name;\n\n      const newGifteeNamesByName = {\n        ...gifteeNamesByName,\n        [currentPerson.name]: nextPersonName\n      };\n\n      const newQueue = queue.length && nextPersonIndex !== -1 ? [\n        // Drop nextPerson from the queue:\n        ...queue.slice(0, nextPersonIndex), ...queue.slice(nextPersonIndex + 1, queue.length)\n      ] : queue\n\n      return {\n        currentPerson: nextPerson,\n        queue: newQueue,\n        gifteeNamesByName: newGifteeNamesByName\n      }\n    }, {\n      currentPerson: shuffledPeopleSortedByHasExclusionsFirst[0],\n      queue: shuffledPeopleSortedByHasExclusionsFirst.slice(1),\n      gifteeNamesByName: {}\n    }).gifteeNamesByName\n\n    // Horrible hack because our algorithm isn't perfect:\n    const namesWithoutGiftee = without(people.map(p => p.name), ...Object.keys(gifteeNamesByName));\n    const namesWithoutGifter = without(people.map(p => p.name), ...Object.values(gifteeNamesByName));\n\n    if (namesWithoutGiftee.length === 1 && namesWithoutGifter.length === 1 && namesWithoutGiftee[0] !== namesWithoutGifter[0]) {\n      const gifteelessExcludedName = excludedNamesByName[namesWithoutGiftee[0]];\n\n      if (gifteelessExcludedName !== namesWithoutGifter[0]) {\n        gifteeNamesByName[namesWithoutGiftee[0]] = namesWithoutGifter[0];\n      }\n    }\n\n    const newPeople = people.map(person => {\n      return {\n        ...person,\n        giftee: gifteeNamesByName[person.name]\n      };\n    });\n\n    this.setState({\n      people: newPeople\n    });\n  }\n\n  handleExclusionChange = (name, excludedName) => {\n    const { exclusions } = this.state;\n\n    const filteredExclusions = exclusions.filter(pair => !pair.has(name) && !pair.has(excludedName))\n\n    const newExclusions = excludedName ? [\n      ...filteredExclusions,\n      new Set([ name, excludedName ])\n    ] : filteredExclusions;\n\n    this.setState({\n      exclusions: newExclusions\n    });\n  }\n\n  handlePersonDelete = name => {\n    const { people, exclusions } = this.state;\n\n    this.setState({\n      people: people.filter(person => person.name !== name),\n      exclusions: exclusions.filter(pair => !pair.has(name)),\n    });\n  }\n\n  getExclusionOptions = () => {\n    const { people } = this.state;\n\n    return people.map(person => person.name);\n  }\n\n  getExcludedNamesByName = () => {\n    const { exclusions } = this.state;\n\n    return exclusions.reduce((excludedNamesByName, exclusion) => {\n      const names = Array.from(exclusion);\n\n      return {\n        ...excludedNamesByName,\n        [names[0]]: names[1],\n        [names[1]]: names[0]\n      }\n    }, {})\n  }\n\n  render() {\n    const { name, people, exclusions } = this.state;\n\n    const excludedNamesByName = this.getExcludedNamesByName()\n    const peopleWithExclusions = people.map(person => ({\n      ...person,\n      exclusion: excludedNamesByName[person.name] || null\n    }));\n    const addingMoreExclusionsDisabled = Math.floor(people.length / 2) <= exclusions.length;\n    const isGenerateGifteesDisabled = people.length < MIN_PEOPLE;\n\n    return (\n      <div className=\"PersonForm\">\n        <div className=\"generate-giftees-container\">\n          <p>\n            { people.length ? (\n              <Button\n                children=\"Generate giftees\"\n                variant=\"contained\"\n                color=\"primary\"\n                disabled={ isGenerateGifteesDisabled }\n                type=\"submit\"\n                onClick={ this.handleGenerateGiftees }\n              />\n            ) : null }\n          </p>\n        </div>\n        <PersonTable\n          people={ peopleWithExclusions }\n          exclusionOptions={ this.getExclusionOptions() }\n          onPersonDelete={ this.handlePersonDelete }\n          onExclusionChange={ this.handleExclusionChange }\n          addingMoreExclusionsDisabled={ isGenerateGifteesDisabled || addingMoreExclusionsDisabled }\n        />\n        { isGenerateGifteesDisabled ? (\n          <p>\n            Add at least { MIN_PEOPLE } people to be able to generate giftees.\n          </p>\n        ) : null }\n        <form\n          noValidate\n          onSubmit={ this.handleSubmit }\n        >\n          <TextField\n            label=\"Name\"\n            value={ name }\n            onChange={ this.handleNameChange }\n            margin=\"normal\"\n          />\n          <Button\n            className=\"add-person\"\n            children=\"Add\"\n            variant=\"contained\"\n            color=\"primary\"\n            disabled={ this.isAddDisabled() }\n            type=\"submit\"\n          />\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default PersonForm;\n","import React, { PureComponent } from 'react';\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport './App.css';\n\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\nimport amber from '@material-ui/core/colors/amber';\n\nimport PersonForm from './PersonForm'\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#81c784',\n    },\n    secondary: amber\n  }\n});\n\nclass App extends PureComponent {\n  render() {\n    return (\n      <MuiThemeProvider theme={theme}>\n        <Router basename={ process.env.PUBLIC_URL }>\n          <div className=\"App\">\n            <header className=\"App-header\">\n              <h1>Giftibutor</h1>\n              <h2>the Secret Santa generator</h2>\n            </header>\n            <main className=\"App-main\">\n              <Switch>\n                <Route path=\"/\" exact component={ PersonForm } />\n                <Route path=\"/giftee\" exact component={() => (<span children=\"TODO\" />)} />\n                <Route component={() => (<span children=\"Not Found\" />)} />\n              </Switch>\n            </main>\n          </div>\n        </Router>\n      </MuiThemeProvider>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}